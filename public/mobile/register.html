<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>第五大道注册-王晓迪</title>
		<link rel="shotcut icon" href="img/favicon.ico">
		<link rel="stylesheet" type="text/css" href="css/reset.css" />
		<link rel="stylesheet" type="text/css" href="css/my_order.css" />
	</head>

	<body>
		<!--我的订单-->
		<div class="tab_top">
			<a href="login.html">
				<div class="return"></div>
			</a>
			<div class="text">用户注册</div>
		</div>
		<form class="login">
			<div class="userName">
				<input name="account" type="text" placeholder="请输入邮箱/手机号">
			</div>
			<div class="password relative">
				<input name="password" type="password" visible placeholder="请输入密码">
				<img class="unsee" src="img/other/login_pass.png" />
				<img class="see" src="img/other/login_passee.png" />
			</div>
			<div class="confirm">
				<input type="password" placeholder="请确认密码">
			</div>
			<div class="confirm_code">
				<input type="text" placeholder="请输入验证码">
				<span class="txt">获取验证码</span>
			</div>
			<button type="button" disabled class="btn" id="regBtn">注册</button>
			<div class="other clearfix">
				点击注册,表示同意
				<a href="#">《第五大道用户服务协议》</a>
			</div>
		</form>
	</body>
	<script src="assets/js/jquery-3.2.1.min.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		$(function() {
			//登入页面
			$("input").keyup(function() {
				if($(".userName input").val() != '' && $(".password input").val() != '' && $(".confirm input").val() != '' && $(".confirm_code input").val() != '') {
					$(".btn").prop("disabled", false);
				} else {
					$(".btn").prop("disabled", true);
				}
			});
			//密码显示隐藏
			$(".see").click(function() {
				$(this).css("display", "none");
				$(".unsee").css("display", "block");
				$(".password input").prop("type", "password");
			})
			$(".unsee").click(function() {
				$(this).css("display", "none");
				$(".see").css("display", "block");
				$(".password input").prop("type", "text");
			})
			//注册账户
			$("#regBtn").click(function() {
				var data = $("form").serialize();
				$.ajax({
					type: "post",
					url: "/users/register/",
					async: true,
					data: data,
					success: function(result) {
						if(result.status) {
							sessionStorage.uid = result._id;
							location.href = "index.html";
						} else {
							alert(result.msg);
						}
					}
				});
			});
		})
	</script>

</html>